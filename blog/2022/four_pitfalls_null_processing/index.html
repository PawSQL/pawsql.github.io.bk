<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="NULL value processing is the most error-prone for database application developers, mainly because we are accustomed to using binary Boolean logic to think,  while the database's processing logic for NULL values is three-valued logic. 
"><meta name=author content=PawSQL><link href=https://pawsql.github.io/blog/2022/four_pitfalls_null_processing/ rel=canonical><link rel=icon href=../../../assets/favicon.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.4.0"><title>Four pitfalls of SQL Processing with NULL Values - PawSQL</title><link rel=stylesheet href=../../../assets/stylesheets/main.css><link rel=stylesheet href=../../../assets/stylesheets/palette.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Mulish:300,300i,400,400i,700,700i%7CMulish:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Mulish";--md-code-font:"Mulish"}</style><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-4H5ZJSC9WN"),document.addEventListener("DOMContentLoaded",function(){if(document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document.forms.feedback){var e,a=document.forms.feedback;for(e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}"undefined"!=typeof location$&&location$.subscribe(function(e){n("config","G-4H5ZJSC9WN",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-4H5ZJSC9WN",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel=stylesheet href=../../../overrides/assets/stylesheets/main.css></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#four-pitfalls-of-sql-processing-with-null-values class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <button class="md-banner__button md-icon" aria-label="Don't show this again"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> <a href=https://twitter.com/pawsql> For updates follow <strong>@pawsql</strong> on <span class="twemoji twitter"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </span> <strong>Twitter</strong> </a> </div> <script>var content,el=document.querySelector("[data-md-component=announce]");el&&(content=el.querySelector(".md-typeset"),__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0))</script> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title=PawSQL class="md-header__button md-logo" aria-label=PawSQL data-md-component=logo> <img src=../../../assets/images/rr48.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> PawSQL </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Four pitfalls of SQL Processing with NULL Values </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/pawsql title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> PawSQL </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../pawsqladvisor/ class=md-tabs__link> PawSQL Advisor </a> </li> <li class=md-tabs__item> <a href=../../../pawindexadvisor/ class=md-tabs__link> Paw Index Advisor </a> </li> <li class=md-tabs__item> <a href=../../../pawreference/rewrite-rules/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../../ class="md-tabs__link md-tabs__link--active"> Blog </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title=PawSQL class="md-nav__button md-logo" aria-label=PawSQL data-md-component=logo> <img src=../../../assets/images/rr48.png alt=logo> </a> PawSQL </label> <div class=md-nav__source> <a href=https://github.com/pawsql title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> PawSQL </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_2 type=checkbox id=__nav_2 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../../pawsqladvisor/ >PawSQL Advisor</a> <label for=__nav_2> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="PawSQL Advisor" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> PawSQL Advisor </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../pawsqladvisor/configuration/ class=md-nav__link> Configuration </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3 checked> <label class=md-nav__link for=__nav_2_3> Explain Output <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Explain Output" data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Explain Output </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../pawsqladvisor/pawsummary/ class=md-nav__link> Tuning Summary </a> </li> <li class=md-nav__item> <a href=../../../pawsqladvisor/tuningdetails/ class=md-nav__link> Tuning Details </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../pawsqladvisor/change-log/ class=md-nav__link> Change Log </a> </li> <li class=md-nav__item> <a href=../../../pawsqladvisor/eula/ class=md-nav__link> EULA </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../../pawindexadvisor/ >Paw Index Advisor</a> <label for=__nav_3> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label="Paw Index Advisor" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Paw Index Advisor </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../pawindexadvisor/configuration/ class=md-nav__link> Configuration </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3 checked> <label class=md-nav__link for=__nav_3_3> Explain Output <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Explain Output" data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Explain Output </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../pawindexadvisor/recommended-indexes/ class=md-nav__link> Indexes Recommended </a> </li> <li class=md-nav__item> <a href=../../../pawindexadvisor/what-if-validation/ class=md-nav__link> What-if Validation </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../pawindexadvisor/change-log/ class=md-nav__link> Change Log </a> </li> <li class=md-nav__item> <a href=../../../pawindexadvisor/eula/ class=md-nav__link> EULA </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Reference data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../pawreference/rewrite-rules/ class=md-nav__link> Rewrite Optimization </a> </li> <li class=md-nav__item> <a href=../../../pawreference/Query%20Folding/ class=md-nav__link> Query Folding </a> </li> <li class=md-nav__item> <a href=../../../pawreference/datatype-mismatching/ class=md-nav__link> Datatype Mismatching Rewrite </a> </li> <li class=md-nav__item> <a href=../../../pawreference/Projection%20Pushdown/ class=md-nav__link> Projection Pushdown </a> </li> <li class=md-nav__item> <a href=../../../pawreference/audit-rules/ class=md-nav__link> Auditing Rules </a> </li> <li class=md-nav__item> <a href=../../../pawreference/sql-syntax/ class=md-nav__link> SQL Syntax&Indexes </a> </li> <li class=md-nav__item> <a href=../../../pawreference/ActivationCodeforPlugin/ class=md-nav__link> Activation Code for Plug-in </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5 checked> <div class="md-nav__link md-nav__link--index "> <a href=../../ >Blog</a> <label for=__nav_5> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav aria-label=Blog data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2 type=checkbox id=__nav_5_2 checked> <label class=md-nav__link for=__nav_5_2> 2022 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=2022 data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> 2022 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Four pitfalls of SQL Processing with NULL Values <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Four pitfalls of SQL Processing with NULL Values </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=#code-of-examination class=md-nav__link> Code of Examination </a> </li> <li class=md-nav__item> <a href=#three-valued-logic1 class=md-nav__link> Three-valued Logic1 </a> </li> <li class=md-nav__item> <a href=#pitfalls-of-null-values class=md-nav__link> pitfalls of NULL Values </a> <nav class=md-nav aria-label="pitfalls of NULL Values"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#comparison-with-null-values class=md-nav__link> Comparison with NULL Values </a> </li> <li class=md-nav__item> <a href=#2-case-when-expression-with-null class=md-nav__link> 2. Case When expression with NULL </a> </li> <li class=md-nav__item> <a href=#3-not-in-with-null class=md-nav__link> 3. NOT IN with NULL </a> </li> <li class=md-nav__item> <a href=#4-all-subquery-with-null class=md-nav__link> 4. ALL Subquery with NULL </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#null-optimization-in-pawsql-advisor class=md-nav__link> NULL Optimization in PawSQL Advisor </a> </li> <li class=md-nav__item> <a href=#examination-of-the-pawsql-advisor-regarding-to-null-processing class=md-nav__link> Examination of The PawSQL Advisor regarding to NULL processing </a> <nav class=md-nav aria-label="Examination of The PawSQL Advisor regarding to NULL processing"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#pawsql-advisor-output-summary class=md-nav__link> PawSQL Advisor Output (Summary) </a> </li> <li class=md-nav__item> <a href=#pawsql-advisor-output-single-sql-details class=md-nav__link> PawSQL Advisor Output (single SQL details) </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../top5_sql_optimization_tools/ class=md-nav__link> Top 5 SQL Optimization Tools </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=four-pitfalls-of-sql-processing-with-null-values>Four Pitfalls of SQL Processing with NULL Values<a class=headerlink href=#four-pitfalls-of-sql-processing-with-null-values title="Permanent link">&para;</a></h1> <p><strong><code>NULL</code> value processing is the most error-prone for database application developers, mainly because we are accustomed to using binary Boolean logic to think, while the database's processing logic for <code>NULL</code> values is <a href=#Three-valued>three-valued logic</a>. In fact, the most flawed component in the database optimizers is actually the logic related to <code>NULL</code> value processing. Even mature database software, such as DB2/Teradata, still has more than 20% of the bugs related <code>NULL</code> processing.</strong></p> <aside class=mdx-author> <p><img alt=@Tomas src=../../../assets/images/ico_paw.png></p> <p><span><strong>Tomas Nemec</strong> · <a class="magiclink magiclink-github magiclink-mention" href=https://github.com/Tomas title="GitHub User: Tomas">@Tomas</a></span> <span> <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path fill-rule=evenodd d="M6.75 0a.75.75 0 0 1 .75.75V3h9V.75a.75.75 0 0 1 1.5 0V3h2.75c.966 0 1.75.784 1.75 1.75v16a1.75 1.75 0 0 1-1.75 1.75H3.25a1.75 1.75 0 0 1-1.75-1.75v-16C1.5 3.784 2.284 3 3.25 3H6V.75A.75.75 0 0 1 6.75 0zm-3.5 4.5a.25.25 0 0 0-.25.25V8h18V4.75a.25.25 0 0 0-.25-.25H3.25zM21 9.5H3v11.25c0 .138.112.25.25.25h17.5a.25.25 0 0 0 .25-.25V9.5z"/></svg></span> Aug 5, 2022 · <span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12.5 7.25a.75.75 0 0 0-1.5 0v5.5c0 .27.144.518.378.651l3.5 2a.75.75 0 0 0 .744-1.302L12.5 12.315V7.25z"/><path fill-rule=evenodd d="M12 1C5.925 1 1 5.925 1 12s4.925 11 11 11 11-4.925 11-11S18.075 1 12 1zM2.5 12a9.5 9.5 0 1 1 19 0 9.5 9.5 0 0 1-19 0z"/></svg></span> 10 min read · </span></p> </aside> <hr> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>In this article, we analyze the root causes of the <code>NULL</code> value pitfalls, and concludes a simple and effective logic to infer the final result. At the same time, we explain the applicable conditions and solutions for the four common scenarios in daily development work; Finally, three optimization rules related to <code>NULL</code> value processing in PawSQL Advisor are introduced and evaluated by examples. After reading this article, you will be able to cope with all the scenarios regarding to <code>NULL</code> value handling in your daily work.</p> <h2 id=code-of-examination>Code of Examination<a class=headerlink href=#code-of-examination title="Permanent link">&para;</a></h2> <p>The following examination logic covers all scenarios for <code>NULL</code> values in SQL processing, and by understanding the following logic, you can avoid the <code>NULL</code> pitfalls.</p> <ol> <li>The result of all comparison and arithmetic operators (<code>&gt;, =, &lt;, &lt;&gt;, &lt;=, &gt;=, +,-,*, /</code>) with <code>NULL</code> result is <code>unknown</code></li> <li>The logical operations(<code>AND, OR, NOT</code>) of <code>unknown</code> follows the truth values table of three-valued operations</li> <li>If the result of the operation is returned directly to the user, use <code>NULL</code> to represent <code>unknown</code></li> <li> <p>If the result of the operation is <code>true</code> or <code>false</code> as a condition during SQL processing, then the operation needs to be performed by the three-value logic, and the final result is determined by the following logic</p> <p>4.1. {false、unknown} -&gt; false</p> <p>4.2. {true} -&gt;true</p> </li> <li> <p>In set operations such as <code>UNION</code> or <code>INTERSECT</code>, <code>NULL</code> values are considered equal to each other.</p> </li> </ol> <h2 id=three-valued-logic1>Three-valued Logic<sup id=fnref:1><a class=footnote-ref href=#fn:1>1</a></sup><a class=headerlink href=#three-valued-logic1 title="Permanent link">&para;</a></h2> <p>In logic, a three-valued logic (also trinary logic, trivalent, ternary, or trilean, sometimes abbreviated 3VL) is any of several many-valued logic systems in which there are three truth values indicating true, false and some indeterminate third value. This is contrasted with the more commonly known bivalent logics (such as classical sentential or Boolean logic) which provide only for true and false.</p> <p><img alt src=../../three-valued-table.png></p> <h2 id=pitfalls-of-null-values>pitfalls of NULL Values<a class=headerlink href=#pitfalls-of-null-values title="Permanent link">&para;</a></h2> <h3 id=comparison-with-null-values>Comparison with NULL Values<a class=headerlink href=#comparison-with-null-values title="Permanent link">&para;</a></h3> <p><strong>Conclusion</strong>: <code>expr = null</code> can’t determine the expression <code>expr</code> to be <code>null</code>, and <code>is null</code> should be used to determine whether the <code>expr</code> is null.</p> <p>Suppose there is a <code>customer</code> table with following five columns, among which two columns (<code>c_nationcode</code>,<code>c_phone</code>) are nullable.</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=p>(</span><span class=w></span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>    </span><span class=n>c_custkey</span><span class=w> </span><span class=n>int4</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w></span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>    </span><span class=n>c_name</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>25</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w></span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>    </span><span class=n>c_nationcode</span><span class=w> </span><span class=nb>char</span><span class=p>(</span><span class=mi>8</span><span class=p>)</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w></span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=w>    </span><span class=n>c_phone</span><span class=w> </span><span class=nb>varchar</span><span class=p>(</span><span class=mi>15</span><span class=p>)</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w></span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=w>  </span><span class=n>c_regdate</span><span class=w> </span><span class=nb>date</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w></span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=w>    </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=n>customer_pkey</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>c_custkey</span><span class=p>)</span><span class=w></span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=p>);</span><span class=w></span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Randy&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;en&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;13910010010&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;20210911&#39;</span><span class=p>);</span><span class=w></span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Mandy&#39;</span><span class=p>,</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;13910010012&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;20200211&#39;</span><span class=p>);</span><span class=w></span>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Ray&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;us&#39;</span><span class=p>,</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;20180902&#39;</span><span class=p>);</span><span class=w></span>
</code></pre></div> If a developer wants to find out the customers with empty phones through the following statement, he won't succeed because the result of following statement is always empty.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>c_phone</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>The correct way should be： <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>c_phone</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>null</span><span class=p>;</span><span class=w></span>
</code></pre></div> Let's examine according to the <a href=#Code-of-Examination>Code of Examination</a>, the predicate <code>c_phone = null</code> is evaluated to <code>unknown</code>; then according to Rule 4.1, <code>unknown</code> is treated as <code>false</code>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=w>    </span><span class=n>c_phone</span><span class=o>=</span><span class=kc>null</span><span class=w> </span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>    </span><span class=o>-&gt;</span><span class=w> </span><span class=n>unknown</span><span class=w> </span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>    </span><span class=o>-&gt;</span><span class=w> </span><span class=kc>false</span><span class=p>;</span><span class=w></span>
</code></pre></div> <h3 id=2-case-when-expression-with-null>2. <code>Case When</code> expression with <code>NULL</code><a class=headerlink href=#2-case-when-expression-with-null title="Permanent link">&para;</a></h3> <ul> <li><strong>Conclusion</strong>: <code>case expr when null</code> can't determine if the expression is null, the correct way is <code>case when expr is null</code>.</li> </ul> <p>Problems in the <code>where</code> or <code>having</code> clause are easier to detect and correct, while it is much more difficult to dectect <code>null</code> usages in <code>case when</code> expressions, either by human or by existing SQL auditing tools.</p> <p>For example, if we want to decode the nation code to nation name, and the code is null, we want to set nation name to <code>China</code>:</p> <p><div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=k>select</span><span class=w> </span><span class=n>c_name</span><span class=p>,</span><span class=w> </span><span class=k>case</span><span class=w> </span><span class=n>c_nationcode</span><span class=w> </span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>                </span><span class=k>when</span><span class=w> </span><span class=s1>&#39;us&#39;</span><span class=w> </span><span class=k>then</span><span class=w> </span><span class=s1>&#39;USA&#39;</span><span class=w> </span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>                </span><span class=k>when</span><span class=w> </span><span class=s1>&#39;cn&#39;</span><span class=w> </span><span class=k>then</span><span class=w> </span><span class=s1>&#39;China&#39;</span><span class=w></span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>                </span><span class=k>when</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>then</span><span class=w> </span><span class=s1>&#39;China&#39;</span><span class=w> </span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>                </span><span class=k>else</span><span class=w> </span><span class=s1>&#39;Others&#39;</span><span class=w> </span><span class=k>end</span><span class=w> </span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w></span>
</code></pre></div> The above statement does not convert the country code to <code>null</code> to <code>China</code>. Because <code>when null</code> is actually an operation performed by an <code>c_nationcode = null</code>. The correct way to to do it should be: <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=k>select</span><span class=w> </span><span class=n>c_name</span><span class=p>,</span><span class=w> </span><span class=k>case</span><span class=w> </span><span class=k>when</span><span class=w> </span><span class=n>c_nationcode</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;us&#39;</span><span class=w> </span><span class=k>then</span><span class=w> </span><span class=s1>&#39;USA&#39;</span><span class=w> </span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>                    </span><span class=k>when</span><span class=w> </span><span class=n>c_nationcode</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;cn&#39;</span><span class=w> </span><span class=k>then</span><span class=w> </span><span class=s1>&#39;China&#39;</span><span class=w></span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>                    </span><span class=k>when</span><span class=w> </span><span class=n>c_nationcode</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>then</span><span class=w> </span><span class=s1>&#39;China&#39;</span><span class=w> </span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>                    </span><span class=k>else</span><span class=w> </span><span class=s1>&#39;Others&#39;</span><span class=w> </span><span class=k>end</span><span class=w> </span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w></span>
</code></pre></div></p> <h3 id=3-not-in-with-null>3. NOT IN with NULL<a class=headerlink href=#3-not-in-with-null title="Permanent link">&para;</a></h3> <ul> <li><strong>Conclusion</strong> A predicate of a <code>not in</code> subquery with nullable select elements will always be evaluated to false.</li> </ul> <p>Suppose we have an <code>orders</code> table where the customer id(<code>o_custkey</code>) and order date(<code>o_orderdate</code>) are nullable due to missing data.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>orders</span><span class=w> </span><span class=p>(</span><span class=w></span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>    </span><span class=n>o_orderkey</span><span class=w> </span><span class=n>int4</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w></span>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>    </span><span class=n>o_custkey</span><span class=w> </span><span class=n>int4</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w></span>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>    </span><span class=n>o_orderdate</span><span class=w> </span><span class=nb>date</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w></span>
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>    </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=n>orders_pkey</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>o_orderkey</span><span class=p>)</span><span class=w></span>
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=p>);</span><span class=w></span>
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>orders</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;2021-01-01&#39;</span><span class=p>);</span><span class=w></span>
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>orders</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=w> </span><span class=k>null</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;2020-09-01&#39;</span><span class=p>);</span><span class=w></span>
<a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>orders</span><span class=w> </span><span class=k>values</span><span class=p>(</span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=mi>3</span><span class=p>,</span><span class=w> </span><span class=k>null</span><span class=p>);</span><span class=w></span>
</code></pre></div> <p>Now we want to find customers without orders for marketing. The expected result is the customer whose <code>c_custkey</code> is <code>2</code>, and the query statement might look like this,</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=n>customer</span><span class=w> </span>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=k>where</span><span class=w> </span><span class=n>c_custkey</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=w></span>
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>o_custkey</span><span class=w> </span>
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>  </span><span class=k>from</span><span class=w> </span><span class=n>orders</span><span class=w></span>
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=w>  </span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>In fact, the above query return nothing to us. The reason is that the <code>o_custkey</code> in the subquery has <code>null</code> values, and the processing logic of <code>NOT IN</code> is like this</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=n>c_custkey</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=mi>1</span><span class=err>，</span><span class=mi>3</span><span class=p>,</span><span class=k>null</span><span class=p>)</span><span class=w> </span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=err>→</span><span class=w> </span><span class=n>c_custkey</span><span class=o>&lt;&gt;</span><span class=mi>1</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>c_custkey</span><span class=o>&lt;&gt;</span><span class=mi>3</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>c_custkey</span><span class=o>&lt;&gt;</span><span class=k>null</span><span class=w> </span>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=err>→</span><span class=w> </span><span class=n>c_custkey</span><span class=o>&lt;&gt;</span><span class=mi>1</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=n>c_custkey</span><span class=o>&lt;&gt;</span><span class=mi>3</span><span class=w> </span><span class=k>and</span><span class=w> </span><span class=k>unknown</span><span class=w> </span>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=err>→</span><span class=w> </span><span class=k>unknown</span><span class=w> </span>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=o>-&gt;</span><span class=w> </span><span class=k>false</span><span class=w></span>
</code></pre></div> <p>In fact, if there are <code>null</code> values in the result set of the subquery, the SQL will always return empty result set.</p> <p>There are two correct ways:</p> <ul> <li> <p>Add a <code>NOT NULL</code> predicate to the subquery, that is</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w> </span>
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=k>where</span><span class=w> </span><span class=n>c_custkey</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=w></span>
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>o_custkey</span><span class=w> </span>
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=w>  </span><span class=k>from</span><span class=w> </span><span class=n>orders</span><span class=w> </span>
<a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=n>o_custkey</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w></span>
<a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=w>  </span><span class=p>)</span><span class=w></span>
</code></pre></div> </li> <li> <p>Rewrite the <code>NOT IN</code> subquery to the <code>not exists</code> subquery, that is</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>  </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w> </span>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=p>(</span><span class=w></span>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>    </span><span class=k>select</span><span class=w> </span><span class=n>o_custkey</span><span class=w> </span>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>    </span><span class=k>from</span><span class=w> </span><span class=n>orders</span><span class=w> </span>
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>    </span><span class=k>where</span><span class=w> </span><span class=n>o_custkey</span><span class=o>=</span><span class=n>c_custkey</span><span class=w></span>
<a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=w>    </span><span class=p>)</span><span class=w></span>
</code></pre></div> </li> </ul> <p><strong>Note</strong>: PawSQL Advisor adopts the first method to do rewrite optimization, but it is more powerful, PawSQL Advisor first determines whether the columns in the subquery may be empty, and if it is possible, it will recommend the rewritten SQL to the user.</p> <h3 id=4-all-subquery-with-null>4. ALL Subquery with NULL<a class=headerlink href=#4-all-subquery-with-null title="Permanent link">&para;</a></h3> <ul> <li><strong>Conclusion</strong>: A condition of an <code>ALL</code>-qualified subquery with nullable select elements will always be evaluated to false.</li> </ul> <p>Suppose we want to find out the orders which are wrongly registered after the user is revoked. One of solution is this following query statement.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=w>    </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span>
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>    </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w> </span>
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>    </span><span class=k>where</span><span class=w> </span><span class=n>c_regdate</span><span class=w> </span><span class=o>&gt;</span><span class=w>  </span><span class=k>ALL</span><span class=w> </span><span class=p>(</span><span class=w> </span>
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>      </span><span class=k>select</span><span class=w> </span><span class=n>o_orderdate</span><span class=w>        </span>
<a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=w>      </span><span class=k>from</span><span class=w> </span><span class=n>orders</span><span class=w> </span>
<a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=w>      </span><span class=k>where</span><span class=w> </span><span class=n>c_custkey</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>o_custkey</span><span class=w></span>
<a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=w>      </span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>Similar to <code>NOT IN</code> above, this sql does not return the expected result due to the presence of NULL in the result of the subquery. The <code>ALL</code> operation is actually performed by comparing it with the returned result set, and then performing the AND operation, and the final result is <code>unknown</code>. While <code>unknown</code> as a condition to be evaluated is, the result is <code>false</code>.</p> <p>There are two ways to correct it:</p> <ul> <li>Add a <code>NOT NULL</code> predicate to the subquery, </li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span>
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w> </span>
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=k>where</span><span class=w> </span><span class=n>c_regdate</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=k>all</span><span class=p>(</span><span class=w></span>
<a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>o_orderdate</span><span class=w> </span>
<a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=w>  </span><span class=k>from</span><span class=w> </span><span class=n>orders</span><span class=w> </span>
<a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=n>o_orderdate</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w></span>
<a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=w>  </span><span class=p>)</span><span class=w></span>
</code></pre></div> <ul> <li>Rewrite <code>expr &gt; all</code> to aggregate scalar subquery <code>expr &gt; (select max()...)</code> <sup id=fnref:2><a class=footnote-ref href=#fn:2>2</a></sup></li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span>
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w> </span>
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=k>where</span><span class=w> </span><span class=n>c_regdate</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=p>(</span><span class=w></span>
<a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=k>max</span><span class=p>(</span><span class=n>o_custkey</span><span class=p>)</span><span class=w> </span>
<a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=w>  </span><span class=k>from</span><span class=w> </span><span class=n>orders</span><span class=w></span>
<a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=w>  </span><span class=p>)</span><span class=w></span>
</code></pre></div> <p><strong>Note</strong>: PawSQL Advisor adopts the second way to rewrite optimization, because PawSQL Advisor can further optimize the performance of the second rewritten SQL by rewriting ('max/min subquery rewrite rule').</p> <h2 id=null-optimization-in-pawsql-advisor><code>NULL</code> Optimization in PawSQL Advisor<a class=headerlink href=#null-optimization-in-pawsql-advisor title="Permanent link">&para;</a></h2> <p>PawSQL Advisor has three rewrite optimization rules for <code>NULL</code> processing, corresponding to the four cases above.</p> <table> <thead> <tr> <th>RuleCode</th> <th>Rule Description</th> </tr> </thead> <tbody> <tr> <td><a href=../../../pawreference/rewrite-rules/#equal-to-null-rewrite>UseEqual4NullRewrite</a></td> <td><code>expr = null</code> or <code>case expr when null</code> can't determine whether the <code>expr</code> is null , <code>is null</code> should be used</td> </tr> <tr> <td><a href=../../../pawreference/rewrite-rules/#nullable-not-in-rewrite>NotInNullableSubQueryRewrite</a></td> <td>A predicate of a <code>not in</code> subquery with nullable select elements will always be evaluated to false.</td> </tr> <tr> <td><a href=../../../pawreference/rewrite-rules/#nullable-all-rewrite>AllQualifierSubQueryRewrite</a></td> <td>A condition of an <code>ALL</code>-qualified subquery with nullable select elements will always be evaluated to false.</td> </tr> </tbody> </table> <p>PawSQL Advisor is more powerful, it will be based on whether the definition of a column in the DDL is nullable, and whether the operation on the column will produce nullable results, to determine whether the query column in the subquery is nullable, if it is possible to be empty, it will recommend the rewritten SQL to the user.</p> <p><strong>Logic of NotInNullableSubQueryRewrite</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=w>  </span><span class=n>iterate</span><span class=w> </span><span class=n>parse</span><span class=w> </span><span class=n>tree</span><span class=w> </span><span class=n>of</span><span class=w> </span><span class=n>input</span><span class=w> </span><span class=n>query</span><span class=err>，</span><span class=n>retrieve</span><span class=w> </span><span class=n>all</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>NOT</span><span class=w> </span><span class=n>IN</span><span class=w> </span><span class=n>predicate</span><span class=w></span>
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>  </span><span class=k>for</span><span class=w> </span><span class=n>each</span><span class=w> </span><span class=n>NOT</span><span class=w> </span><span class=n>IN</span><span class=w> </span><span class=n>predicate</span><span class=p>{</span><span class=w></span>
<a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>   </span><span class=k>if</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>predicate</span><span class=w> </span><span class=n>is</span><span class=w> </span><span class=nf>PredicateInValueSelect</span><span class=p>(</span><span class=w> </span><span class=err>`</span><span class=n>expr</span><span class=w> </span><span class=n>not</span><span class=w> </span><span class=nf>in</span><span class=w> </span><span class=p>(</span><span class=n>select</span><span class=w> </span><span class=p>....)</span><span class=err>`</span><span class=p>){</span><span class=w></span>
<a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>       </span><span class=n>check</span><span class=w> </span><span class=n>whether</span><span class=w> </span><span class=n>result</span><span class=w> </span><span class=n>set</span><span class=w> </span><span class=n>of</span><span class=w> </span><span class=n>subquery</span><span class=w> </span><span class=n>is</span><span class=w> </span><span class=n>nullable</span><span class=w></span>
<a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>         </span><span class=k>if</span><span class=w> </span><span class=n>no</span><span class=err>，</span><span class=k>return</span><span class=p>;</span><span class=w></span>
<a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=w>         </span><span class=k>if</span><span class=w> </span><span class=n>yes</span><span class=err>，</span><span class=k>for</span><span class=w> </span><span class=n>each</span><span class=w> </span><span class=n>nullabe</span><span class=w> </span><span class=n>SELECT</span><span class=w> </span><span class=nf>element</span><span class=p>(</span><span class=n>rc</span><span class=p>){</span><span class=w></span>
<a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>             </span><span class=n>check</span><span class=w> </span><span class=n>whether</span><span class=w> </span><span class=n>there</span><span class=w> </span><span class=n>is</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>predicate</span><span class=w> </span><span class=err>`</span><span class=n>rc</span><span class=w> </span><span class=n>is</span><span class=w> </span><span class=n>not</span><span class=w> </span><span class=kc>null</span><span class=err>`</span><span class=w> </span><span class=n>in</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>subquery</span><span class=w></span>
<a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=w>               </span><span class=k>if</span><span class=w> </span><span class=n>no</span><span class=err>，</span><span class=n>create</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>predicate</span><span class=w> </span><span class=err>`</span><span class=n>rc</span><span class=w> </span><span class=n>is</span><span class=w> </span><span class=n>not</span><span class=w> </span><span class=kc>null</span><span class=err>`</span><span class=w> </span><span class=n>and</span><span class=w> </span><span class=n>combine</span><span class=w> </span><span class=n>with</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>conditions</span><span class=w> </span><span class=n>of</span><span class=w> </span><span class=n>WHERE</span><span class=w> </span><span class=n>clause</span><span class=w> </span><span class=n>in</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>sub</span><span class=w> </span><span class=n>query</span><span class=p>;</span><span class=w></span>
<a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=w>               </span><span class=k>if</span><span class=w> </span><span class=n>yes</span><span class=err>，</span><span class=k>continue</span><span class=p>;</span><span class=w></span>
<a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=w>         </span><span class=p>}</span><span class=w></span>
<a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a><span class=w>   </span><span class=p>}</span><span class=w></span>
<a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a><span class=w>   </span><span class=k>if</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>predicate</span><span class=w> </span><span class=n>is</span><span class=w> </span><span class=nf>PredicateInValueList</span><span class=w> </span><span class=p>(</span><span class=err>`</span><span class=n>expr</span><span class=w> </span><span class=n>not</span><span class=w> </span><span class=n>in</span><span class=w> </span><span class=nf>values</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=kc>null</span><span class=p>)</span><span class=err>`</span><span class=p>)</span><span class=w></span>
<a id=__codelineno-14-13 name=__codelineno-14-13 href=#__codelineno-14-13></a><span class=w>       </span><span class=k>for</span><span class=w> </span><span class=n>each</span><span class=w> </span><span class=n>value</span><span class=w> </span><span class=n>in</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>value</span><span class=w> </span><span class=n>list</span><span class=w></span>
<a id=__codelineno-14-14 name=__codelineno-14-14 href=#__codelineno-14-14></a><span class=w>         </span><span class=k>if</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>value</span><span class=w> </span><span class=n>is</span><span class=w> </span><span class=n>NULL</span><span class=err>，</span><span class=n>delete</span><span class=w> </span><span class=n>it</span><span class=w></span>
<a id=__codelineno-14-15 name=__codelineno-14-15 href=#__codelineno-14-15></a><span class=w>  </span><span class=p>}</span><span class=w></span>
</code></pre></div> <p><strong>Logic of checking whether result set of subquery is nullable</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=n>isNullable</span><span class=p>(</span><span class=n>SELECT</span><span class=w> </span><span class=n>expr</span><span class=p>){</span><span class=w></span>
<a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>    </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>expr</span><span class=w> </span><span class=n>is</span><span class=w> </span><span class=n>column</span><span class=w> </span><span class=n>of</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>table</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>column</span><span class=w> </span><span class=n>is</span><span class=w> </span><span class=n>defined</span><span class=w> </span><span class=n>nullable</span><span class=p>)</span><span class=w></span>
<a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w></span>
<a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=w>        </span><span class=k>else</span><span class=w></span>
<a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w></span>
<a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>expr</span><span class=w> </span><span class=n>is</span><span class=w> </span><span class=n>NULL</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w></span>
<a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>expr</span><span class=w> </span><span class=n>is</span><span class=w> </span><span class=n>constant</span><span class=w> </span><span class=n>of</span><span class=w> </span><span class=n>variable</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kc>false</span><span class=p>;</span><span class=w></span>
<a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>expr</span><span class=w> </span><span class=n>is</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>combined</span><span class=w> </span><span class=n>expr</span><span class=p>){</span><span class=w></span>
<a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=n>arg1</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=n>arg2</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=p>...);</span><span class=w></span>
<a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a><span class=w>    </span><span class=p>}</span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>expr</span><span class=w> </span><span class=n>is</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=n>function</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<a id=__codelineno-15-14 name=__codelineno-15-14 href=#__codelineno-15-14></a><span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=n>the</span><span class=w> </span><span class=n>function</span><span class=w> </span><span class=n>is</span><span class=w> </span><span class=n>one</span><span class=w> </span><span class=nf>of</span><span class=w> </span><span class=p>(</span><span class=s>&quot;SUM&quot;</span><span class=p>,</span><span class=s>&quot;Count&quot;</span><span class=p>,</span><span class=s>&quot;AVG&quot;</span><span class=p>))</span><span class=w></span>
<a id=__codelineno-15-15 name=__codelineno-15-15 href=#__codelineno-15-15></a><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=kc>false</span><span class=p>;</span><span class=w></span>
<a id=__codelineno-15-16 name=__codelineno-15-16 href=#__codelineno-15-16></a><span class=w>        </span><span class=k>else</span><span class=w></span>
<a id=__codelineno-15-17 name=__codelineno-15-17 href=#__codelineno-15-17></a><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>isNullable</span><span class=p>(</span><span class=n>arguements</span><span class=w> </span><span class=n>of</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>function</span><span class=p>)</span><span class=w></span>
<a id=__codelineno-15-18 name=__codelineno-15-18 href=#__codelineno-15-18></a><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>expr</span><span class=w> </span><span class=n>is</span><span class=w> </span><span class=n>SSQ</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<a id=__codelineno-15-19 name=__codelineno-15-19 href=#__codelineno-15-19></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>isNullable</span><span class=p>(</span><span class=n>SELECT</span><span class=w> </span><span class=n>expr</span><span class=w> </span><span class=n>of</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>SSQ</span><span class=p>)</span><span class=w></span>
<a id=__codelineno-15-20 name=__codelineno-15-20 href=#__codelineno-15-20></a><span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=p>{</span><span class=w></span>
<a id=__codelineno-15-21 name=__codelineno-15-21 href=#__codelineno-15-21></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=kc>true</span><span class=p>;</span><span class=w></span>
<a id=__codelineno-15-22 name=__codelineno-15-22 href=#__codelineno-15-22></a><span class=w>    </span><span class=p>}</span><span class=w></span>
<a id=__codelineno-15-23 name=__codelineno-15-23 href=#__codelineno-15-23></a><span class=p>}</span><span class=w>       </span>
</code></pre></div> <h2 id=examination-of-the-pawsql-advisor-regarding-to-null-processing>Examination of The PawSQL Advisor regarding to <code>NULL</code> processing<a class=headerlink href=#examination-of-the-pawsql-advisor-regarding-to-null-processing title="Permanent link">&para;</a></h2> <p>Sever cases of <code>NULL</code> handling are demonstrated. The columns <code>c_phone</code> and <code>c_nationkey</code> in the <code>customer</code> table definition are nullable.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=c1>-- Case 1: = null rewritten to is null</span>
<a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>c_phone</span><span class=o>=</span><span class=k>null</span><span class=p>;</span><span class=w>  </span>
<a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>
<a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=c1>-- Case 2: case expr when null is rewritten to case when expr is null</span>
<a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=k>select</span><span class=w> </span><span class=k>case</span><span class=w> </span><span class=n>c_phone</span><span class=w> </span><span class=k>when</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>then</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=k>when</span><span class=w> </span><span class=s1>&#39;139%&#39;</span><span class=w> </span><span class=k>then</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=w> </span><span class=k>end</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=n>c_phone</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=p>;</span><span class=w></span>
<a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a>
<a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=c1>-- Case 3: c_nationkey nullable, increase the c_nationkey is not null condition</span>
<a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>nation</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>n_nationkey</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=n>c_nationkey</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=p>);</span><span class=w></span>
<a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a>
<a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a><span class=c1>-- Case 4: c_nationkey nullable, so max(c_nationkey) is nullable, increasing the c_nationkey is not null condition</span>
<a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>nation</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>n_nationkey</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=k>max</span><span class=p>(</span><span class=n>c_nationkey</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>c_mktsegment</span><span class=p>);</span><span class=w></span>
<a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a>
<a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a><span class=c1>-- Case 5: count()/sum() is never empty, so there is no need to rewrite it</span>
<a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>nation</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=p>(</span><span class=n>n_name</span><span class=p>,</span><span class=n>n_nationkey</span><span class=p>)</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=s1>&#39;China&#39;</span><span class=p>,</span><span class=n>c_nationkey</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=p>);</span><span class=w></span>
<a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a>
<a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a><span class=c1>-- Case 6: c_name is not null, but c_nationkey nullable, so you need to increase the c_nationkey is not null condition</span>
<a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>nation</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>n_nationkey</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>c_nationkey</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>c_mktsegment</span><span class=p>);</span><span class=w></span>
<a id=__codelineno-16-18 name=__codelineno-16-18 href=#__codelineno-16-18></a>
<a id=__codelineno-16-19 name=__codelineno-16-19 href=#__codelineno-16-19></a><span class=c1>-- Case 7: c_nationkey is nullable, so it is rewritten as &gt; (select min(c_nationkey) from customer)</span>
<a id=__codelineno-16-20 name=__codelineno-16-20 href=#__codelineno-16-20></a><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>n_nationkey</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=k>all</span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=n>c_nationkey</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=p>);</span><span class=w></span>
</code></pre></div> <h3 id=pawsql-advisor-output-summary>PawSQL Advisor Output (Summary)<a class=headerlink href=#pawsql-advisor-output-summary title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=cm>/********************************************************************\</span>
<a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=cm> *                                                                   *</span>
<a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=cm> *                PawSQL Optimization Summary                        *</span>
<a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=cm> *                                                                   *</span>
<a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=cm> *                 Powered by PawSQL(2021- )                         *</span>
<a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=cm> *                                                                   *</span>
<a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=cm>\********************************************************************/</span><span class=w></span>
<a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a>
<a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a><span class=mi>1</span><span class=p>.</span><span class=w> </span><span class=n>Optimization</span><span class=w> </span><span class=n>Summary</span><span class=w></span>
<a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>There</span><span class=w> </span><span class=k>are</span><span class=w> </span><span class=mi>7</span><span class=w> </span><span class=n>query</span><span class=w> </span><span class=n>analyzed</span><span class=p>;</span><span class=w></span>
<a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>There</span><span class=w> </span><span class=k>are</span><span class=w> </span><span class=mi>6</span><span class=w> </span><span class=n>optimization</span><span class=w> </span><span class=n>rewrites</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=mi>6</span><span class=w> </span><span class=n>queries</span><span class=p>;</span><span class=w></span>
<a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>There</span><span class=w> </span><span class=k>are</span><span class=w> </span><span class=mi>9</span><span class=w> </span><span class=n>violations</span><span class=w> </span><span class=k>of</span><span class=w> </span><span class=n>optimization</span><span class=w> </span><span class=k>rule</span><span class=w> </span><span class=n>against</span><span class=w> </span><span class=mi>6</span><span class=w> </span><span class=n>queries</span><span class=p>;</span><span class=w></span>
<a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>There</span><span class=w> </span><span class=k>are</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=n>indices</span><span class=w> </span><span class=n>recommended</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=mi>4</span><span class=w> </span><span class=n>queries</span><span class=p>;</span><span class=w></span>
<a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>There</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=mi>12</span><span class=p>.</span><span class=mi>91</span><span class=o>%</span><span class=w> </span><span class=n>performance</span><span class=w> </span><span class=n>improvement</span><span class=p>.</span><span class=w></span>
<a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a>
<a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a><span class=mi>2</span><span class=p>.</span><span class=w> </span><span class=n>Optimization</span><span class=w> </span><span class=k>Rule</span><span class=w> </span><span class=n>Violations</span><span class=w></span>
<a id=__codelineno-17-17 name=__codelineno-17-17 href=#__codelineno-17-17></a><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>RuleUseEqual4Null</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=k>null</span><span class=p>.</span><span class=k>sql</span><span class=o>-</span><span class=n>stmt2</span><span class=p>,</span><span class=w> </span><span class=k>null</span><span class=p>.</span><span class=k>sql</span><span class=o>-</span><span class=n>stmt1</span><span class=p>]</span><span class=w></span>
<a id=__codelineno-17-18 name=__codelineno-17-18 href=#__codelineno-17-18></a><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>RuleAllQualifierSubQueryRewrite</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=k>null</span><span class=p>.</span><span class=k>sql</span><span class=o>-</span><span class=n>stmt7</span><span class=p>]</span><span class=w></span>
<a id=__codelineno-17-19 name=__codelineno-17-19 href=#__codelineno-17-19></a><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>RuleNoCond4NonAggSelect</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=k>null</span><span class=p>.</span><span class=k>sql</span><span class=o>-</span><span class=n>stmt3</span><span class=p>,</span><span class=w> </span><span class=k>null</span><span class=p>.</span><span class=k>sql</span><span class=o>-</span><span class=n>stmt6</span><span class=p>,</span><span class=w> </span><span class=k>null</span><span class=p>.</span><span class=k>sql</span><span class=o>-</span><span class=n>stmt7</span><span class=p>]</span><span class=w></span>
<a id=__codelineno-17-20 name=__codelineno-17-20 href=#__codelineno-17-20></a><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>RuleNotInNullableSubQueryRewrite</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=k>null</span><span class=p>.</span><span class=k>sql</span><span class=o>-</span><span class=n>stmt4</span><span class=p>,</span><span class=w> </span><span class=k>null</span><span class=p>.</span><span class=k>sql</span><span class=o>-</span><span class=n>stmt3</span><span class=p>,</span><span class=w> </span><span class=k>null</span><span class=p>.</span><span class=k>sql</span><span class=o>-</span><span class=n>stmt6</span><span class=p>]</span><span class=w></span>
<a id=__codelineno-17-21 name=__codelineno-17-21 href=#__codelineno-17-21></a><span class=w> </span><span class=p>...</span><span class=w></span>
</code></pre></div> <h3 id=pawsql-advisor-output-single-sql-details>PawSQL Advisor Output (single SQL details)<a class=headerlink href=#pawsql-advisor-output-single-sql-details title="Permanent link">&para;</a></h3> <ul> <li>Case 1: <code>= null</code> rewritten to <code>is null</code></li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=c1>-- Original SQL</span>
<a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span>
<a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w> </span>
<a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=k>where</span><span class=w> </span><span class=n>c_phone</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>null</span><span class=p>;</span><span class=w> </span>
<a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a>
<a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=c1>-- Rewritten SQL</span>
<a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span>
<a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w> </span>
<a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a><span class=k>where</span><span class=w> </span><span class=n>customer</span><span class=p>.</span><span class=n>c_phone</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>null</span><span class=p>;</span><span class=w></span>
</code></pre></div> <ul> <li>Case 2: <code>case expr when null</code> rewritten as <code>case when expr is null</code></li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=c1>-- Original SQL</span>
<a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=k>select</span><span class=w> </span><span class=k>case</span><span class=w> </span><span class=n>c_phone</span><span class=w> </span>
<a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=w>        </span><span class=k>when</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>then</span><span class=w> </span><span class=mi>1</span><span class=w> </span>
<a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=w>        </span><span class=k>when</span><span class=w> </span><span class=s1>&#39;139%&#39;</span><span class=w> </span><span class=k>then</span><span class=w> </span><span class=mi>0</span><span class=w> </span>
<a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=w>        </span><span class=k>else</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=w> </span>
<a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=w>        </span><span class=k>end</span><span class=w> </span>
<a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=p>;</span><span class=w></span>
<a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a>
<a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a><span class=c1>-- Rewritten SQL</span>
<a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a><span class=k>select</span><span class=w> </span><span class=k>case</span><span class=w></span>
<a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a><span class=w>         </span><span class=k>when</span><span class=w> </span><span class=n>c_phone</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>null</span><span class=w> </span><span class=k>then</span><span class=w> </span><span class=mi>1</span><span class=w> </span>
<a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a><span class=w>         </span><span class=k>when</span><span class=w> </span><span class=n>c_phone</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;139%&#39;</span><span class=w> </span><span class=k>then</span><span class=w> </span><span class=mi>0</span><span class=w> </span>
<a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a><span class=w>         </span><span class=k>else</span><span class=w> </span><span class=o>-</span><span class=mi>1</span><span class=w> </span>
<a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a><span class=w>       </span><span class=k>end</span><span class=w></span>
<a id=__codelineno-19-15 name=__codelineno-19-15 href=#__codelineno-19-15></a><span class=w>  </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=p>;</span><span class=w></span>
</code></pre></div> <ul> <li>Case 3: <code>c_nationkey</code> is nullable, add the condition <code>c_nationkey is not null</code></li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=c1>-- Original SQL</span>
<a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span>
<a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=k>from</span><span class=w> </span><span class=n>nation</span><span class=w> </span>
<a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=k>where</span><span class=w> </span><span class=n>n_nationkey</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=w></span>
<a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>c_nationkey</span><span class=w> </span>
<a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a><span class=w>  </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w></span>
<a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a><span class=w>  </span><span class=p>);</span><span class=w></span>
<a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a>
<a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a><span class=c1>-- Rewritten SQL</span>
<a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span>
<a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a><span class=k>from</span><span class=w> </span><span class=n>nation</span><span class=w> </span>
<a id=__codelineno-20-12 name=__codelineno-20-12 href=#__codelineno-20-12></a><span class=k>where</span><span class=w> </span><span class=n>n_nationkey</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=w> </span>
<a id=__codelineno-20-13 name=__codelineno-20-13 href=#__codelineno-20-13></a><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>c_nationkey</span><span class=w> </span>
<a id=__codelineno-20-14 name=__codelineno-20-14 href=#__codelineno-20-14></a><span class=w>  </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w></span>
<a id=__codelineno-20-15 name=__codelineno-20-15 href=#__codelineno-20-15></a><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=n>c_nationkey</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w></span>
<a id=__codelineno-20-16 name=__codelineno-20-16 href=#__codelineno-20-16></a><span class=w>  </span><span class=p>)</span><span class=w></span>
</code></pre></div> <ul> <li>Case 4: <code>c_nationkey</code> is nullable, so <code>max(c_nationkey)</code> is nullable, adding the condition <code>c_nationkey is not null</code></li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=c1>-- Original SQL</span>
<a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span>
<a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=k>from</span><span class=w> </span><span class=n>nation</span><span class=w></span>
<a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=k>where</span><span class=w> </span><span class=n>n_nationkey</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=w></span>
<a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=k>max</span><span class=p>(</span><span class=n>c_nationkey</span><span class=p>)</span><span class=w> </span>
<a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a><span class=w>  </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w> </span>
<a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a><span class=w>  </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>c_mktsegment</span><span class=w></span>
<a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a><span class=w>  </span><span class=p>);</span><span class=w></span>
<a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a>
<a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a><span class=c1>-- Rewritten SQL</span>
<a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span>
<a id=__codelineno-21-12 name=__codelineno-21-12 href=#__codelineno-21-12></a><span class=k>from</span><span class=w> </span><span class=n>nation</span><span class=w> </span>
<a id=__codelineno-21-13 name=__codelineno-21-13 href=#__codelineno-21-13></a><span class=k>where</span><span class=w> </span><span class=n>n_nationkey</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=w></span>
<a id=__codelineno-21-14 name=__codelineno-21-14 href=#__codelineno-21-14></a><span class=w>             </span><span class=k>select</span><span class=w> </span><span class=k>max</span><span class=p>(</span><span class=n>customer</span><span class=p>.</span><span class=n>c_nationkey</span><span class=p>)</span><span class=w></span>
<a id=__codelineno-21-15 name=__codelineno-21-15 href=#__codelineno-21-15></a><span class=w>               </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w></span>
<a id=__codelineno-21-16 name=__codelineno-21-16 href=#__codelineno-21-16></a><span class=w>               </span><span class=k>where</span><span class=w> </span><span class=n>c_nationkey</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w></span>
<a id=__codelineno-21-17 name=__codelineno-21-17 href=#__codelineno-21-17></a><span class=w>               </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>c_mktsegment</span><span class=w></span>
<a id=__codelineno-21-18 name=__codelineno-21-18 href=#__codelineno-21-18></a><span class=w>               </span><span class=p>)</span><span class=w></span>
</code></pre></div> <ul> <li>Case 5: <code>count(c_nationkey)</code> is never empty, so there is no need to rewrite it.</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span>
<a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=w>  </span><span class=k>from</span><span class=w> </span><span class=n>nation</span><span class=w> </span>
<a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=n>n_nationkey</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=w></span>
<a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=w>    </span><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=n>c_nationkey</span><span class=p>)</span><span class=w> </span>
<a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=w>    </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w> </span>
<a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a><span class=w>    </span><span class=k>group</span><span class=w> </span><span class=k>by</span><span class=w> </span><span class=n>c_mktsegment</span><span class=w></span>
<a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=w>    </span><span class=p>);</span><span class=w></span>
</code></pre></div> <ul> <li>Case 6: <code>c_name</code> is not empty, but <code>c_nationkey</code> is nullable, so the <code>c_nationkey is not null</code> condition needs to be added.</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=w>  </span><span class=c1>-- Original SQL</span>
<a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span>
<a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=w>  </span><span class=k>from</span><span class=w> </span><span class=n>nation</span><span class=w> </span>
<a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=w>  </span><span class=k>where</span><span class=w> </span><span class=p>(</span><span class=n>n_name</span><span class=p>,</span><span class=n>n_nationkey</span><span class=p>)</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=w></span>
<a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a><span class=w>    </span><span class=k>select</span><span class=w> </span><span class=s1>&#39;China&#39;</span><span class=p>,</span><span class=n>c_nationkey</span><span class=w> </span>
<a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a><span class=w>    </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w></span>
<a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=w>    </span><span class=p>);</span><span class=w></span>
<a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a>
<a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a><span class=w>  </span><span class=c1>-- Rewritten SQL</span>
<a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w></span>
<a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a><span class=w>  </span><span class=k>from</span><span class=w> </span><span class=n>nation</span><span class=w></span>
<a id=__codelineno-23-12 name=__codelineno-23-12 href=#__codelineno-23-12></a><span class=w>  </span><span class=k>where</span><span class=p>(</span><span class=n>n_name</span><span class=p>,</span><span class=w> </span><span class=n>n_nationkey</span><span class=p>)</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>in</span><span class=w> </span><span class=p>(</span><span class=w></span>
<a id=__codelineno-23-13 name=__codelineno-23-13 href=#__codelineno-23-13></a><span class=w>    </span><span class=k>select</span><span class=s1>&#39;China&#39;</span><span class=p>,</span><span class=w> </span><span class=n>c_nationkey</span><span class=w></span>
<a id=__codelineno-23-14 name=__codelineno-23-14 href=#__codelineno-23-14></a><span class=w>    </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w></span>
<a id=__codelineno-23-15 name=__codelineno-23-15 href=#__codelineno-23-15></a><span class=w>    </span><span class=k>where</span><span class=w> </span><span class=n>customer</span><span class=p>.</span><span class=n>c_nationkey</span><span class=w> </span><span class=k>is</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>null</span><span class=w></span>
<a id=__codelineno-23-16 name=__codelineno-23-16 href=#__codelineno-23-16></a><span class=w>    </span><span class=p>)</span><span class=w></span>
</code></pre></div> <ul> <li>Case 7: <code>c_nationkey</code> is nullable, so rewritten as <code>&gt; (select min(c_nationkey) from customer)</code></li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=w>   </span><span class=c1>-- Original SQL</span>
<a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=w>    </span><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span>
<a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a><span class=w>    </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w> </span>
<a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=w>    </span><span class=k>where</span><span class=w> </span><span class=n>n_nationkey</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=k>all</span><span class=p>(</span><span class=w></span>
<a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a><span class=w>      </span><span class=k>select</span><span class=w> </span><span class=n>c_nationkey</span><span class=w> </span>
<a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a><span class=w>      </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w></span>
<a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a><span class=w>      </span><span class=p>);</span><span class=w></span>
<a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a>
<a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a><span class=w>    </span><span class=c1>-- Rewritten SQL</span>
<a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a><span class=w>    </span><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w></span>
<a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a><span class=w>      </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w></span>
<a id=__codelineno-24-12 name=__codelineno-24-12 href=#__codelineno-24-12></a><span class=w>      </span><span class=k>where</span><span class=w> </span><span class=n>n_nationkey</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=p>(</span><span class=w></span>
<a id=__codelineno-24-13 name=__codelineno-24-13 href=#__codelineno-24-13></a><span class=w>        </span><span class=k>select</span><span class=w> </span><span class=k>min</span><span class=p>(</span><span class=n>c_nationkey</span><span class=p>)</span><span class=w> </span>
<a id=__codelineno-24-14 name=__codelineno-24-14 href=#__codelineno-24-14></a><span class=w>        </span><span class=k>from</span><span class=w> </span><span class=n>customer</span><span class=w></span>
<a id=__codelineno-24-15 name=__codelineno-24-15 href=#__codelineno-24-15></a><span class=w>        </span><span class=p>)</span><span class=w></span>
</code></pre></div> <div class=footnote> <hr> <ol> <li id=fn:1> <p><a href=https://en.wikipedia.org/wiki/Three-valued_logic>https://en.wikipedia.org/wiki/Three-valued_logic</a>&#160;<a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">&#8617;</a></p> </li> <li id=fn:2> <p>If <code>expr &lt; all</code> or <code>expr &lt; = all</code>, then rewrite it as <code>expr &lt; (select min() ...)</code>&#160;<a class=footnote-backref href=#fnref:2 title="Jump back to footnote 2 in the text">&#8617;</a></p> </li> </ol> </div> <h2 id=__comments>Comments</h2> <script src=https://giscus.app/client.js data-repo=pawsql/pawsql.github.io data-repo-id=R_kgDOH4MEEA data-category=General data-category-id=DIC_kwDOH4MEEM4CRGHZ data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script> <script>var theme,giscus=document.querySelector("script[src*=giscus]"),palette=__md_get("__palette");palette&&"object"==typeof palette.color&&(theme="slate"===palette.color.scheme?"dark":"light",giscus.setAttribute("data-theme",theme)),document.addEventListener("DOMContentLoaded",function(){document.querySelector("[data-md-component=palette]").addEventListener("change",function(){var e=__md_get("__palette");e&&"object"==typeof e.color&&(e="slate"===e.color.scheme?"dark":"light",document.querySelector(".giscus-frame").contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app"))})})</script> </article> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../ class="md-footer__link md-footer__link--prev" aria-label="Previous: Blog" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Blog </div> </div> </a> <a href=../top5_sql_optimization_tools/ class="md-footer__link md-footer__link--next" aria-label="Next: Top 5 SQL Optimization Tools" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Top 5 SQL Optimization Tools </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2022 - 2022 PawSQL </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material </a> </div> <div class=md-social> <a href=https://twitter.com/pawsql target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=mailto:service@pawsql.com target=_blank rel=noopener title class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m511.6 36.86-64 415.1a32.008 32.008 0 0 1-31.65 27.147c-4.188 0-8.319-.815-12.29-2.472l-122.6-51.1-50.86 76.29C226.3 508.5 219.8 512 212.8 512c-11.5 0-20.8-9.3-20.8-20.8v-96.18c0-7.115 2.372-14.03 6.742-19.64L416 96 122.3 360.3 19.69 317.5C8.438 312.8.812 302.2.062 289.1s5.47-23.72 16.06-29.77l448-255.1c10.69-6.109 23.88-5.547 34 1.406S513.5 24.72 511.6 36.86z"/></svg> </a> <a href=https://github.com/pawsql target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://hub.docker.com/r/pawsql/paw-patroller/ target=_blank rel=noopener title=hub.docker.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["announce.dismiss", "content.code.annotate", "content.tabs.link", "navigation.expand", "navigation.indexes", "navigation.instant", "navigation.prune", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../../../assets/javascripts/workers/search.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.js></script> <script src=../../../overrides/assets/javascripts/bundle.js></script> </body> </html>